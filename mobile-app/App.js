import React from 'react';  
import { View, Text, Button, ActivityIndicator } from 'react-native';  
import { createAppContainer } from 'react-navigation';  
import { createStackNavigator } from 'react-navigation-stack'

class HomeScreen extends React.Component {  
    render() {  
        return (  
            <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>  
                <Text>Home Screen</Text>  
                <Button  
                    title="Go to Results"  
                    onPress={() => this.props.navigation.navigate('Results')}  
                />  
            </View>  
        );  
    }  
}  
class ResultsScreen extends React.Component {  
  constructor(props){
    super(props);
    this.state ={ isLoading: true}
  }

  componentDidMount(){
    return fetch('http://192.168.1.107:5000/predict/data8.csv')
      .then((response) => response.json())
      .then((responseJson) => {

        this.setState({
          isLoading: false,
          dataSource: responseJson,
        }, function(){

        });

      })
      .catch((error) =>{
        console.error(error);
      });
  }



  render(){

    if(this.state.isLoading){
      return(
        <View style={{flex: 1, padding: 20}}>
          <ActivityIndicator/>
        </View>
      )
    }

    return(
      <View style={{flex: 1, paddingTop:20}}>
          <Text>Malware -> {this.state.dataSource.malware_count}</Text>
          <Text>Benign -> {this.state.dataSource.benign_count}</Text>
        
      </View>
    );
  }
}  
  
const AppNavigator = createStackNavigator(  
    {  
        Home: HomeScreen,  
        Results: ResultsScreen  
    },  
    {  
        initialRouteName: "Home"  
    }  
);  
  
const AppContainer = createAppContainer(AppNavigator);  
export default class App extends React.Component {  
    render() {  
        return <AppContainer />;  
    }  
} 