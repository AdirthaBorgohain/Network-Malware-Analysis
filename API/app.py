from flask import Flask
from utils import load_data, predict

import json

app = Flask(__name__)


@app.route('/predict/<filename>')
def predict_network(filename):
    print('Loading Data ...')
    data = load_data(filename)
    print('Data loaded')
    result = predict(data)
    print('Predicted !!')
    return json.dumps({
        'malware_count': result.count(1),
        'benign_count': result.count(0)
    }, indent=2)


if __name__ == "__main__":
    app.run(host='0.0.0.0')
    